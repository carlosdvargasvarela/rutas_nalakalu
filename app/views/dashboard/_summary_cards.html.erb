<!-- app/views/dashboard/_summary_cards.html.erb -->
<% unless current_user.driver? %>
  <!-- Entregas pendientes -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card shadow-sm border-0 h-100 rounded-3">
      <div class="card-body text-center py-4">
        <div class="rounded-circle bg-primary bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3" style="width:70px; height:70px;">
          <i class="bi bi-truck fs-2 text-primary"></i>
        </div>
        <h6 class="text-uppercase text-secondary small fw-semibold">Entregas pendientes</h6>
        <p class="display-6 fw-bold text-primary my-2"><%= @pending_deliveries_count || 0 %></p>
        <%= link_to "Ver entregas", deliveries_path, class: "btn btn-sm btn-primary rounded-pill" %>
      </div>
    </div>
  </div>
  <!-- Pedidos activos -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card shadow-sm border-0 h-100 rounded-3">
      <div class="card-body text-center py-4">
        <div class="rounded-circle bg-success bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3" style="width:70px; height:70px;">
          <i class="bi bi-box-seam fs-2 text-success"></i>
        </div>
        <h6 class="text-uppercase text-secondary small fw-semibold">Pedidos activos</h6>
        <p class="display-6 fw-bold text-success my-2"><%= @active_orders_count || 0 %></p>
        <%= link_to "Ver pedidos", orders_path, class: "btn btn-sm btn-success rounded-pill" %>
      </div>
    </div>
  </div>
<% end %>
<!-- Próximos planes (para todos) -->
<div class="col-12 col-sm-6 col-lg-3">
  <div class="card shadow-sm border-0 h-100 rounded-3">
    <div class="card-body text-center py-4">
      <div class="rounded-circle bg-info bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3" style="width:70px; height:70px;">
        <i class="bi bi-calendar-check fs-2 text-info"></i>
      </div>
      <h6 class="text-uppercase text-secondary small fw-semibold">Próximos planes</h6>
      <p class="display-6 fw-bold text-info my-2"><%= @upcoming_plans_count || 0 %></p>
      <%= link_to "Ver planes", delivery_plans_path, class: "btn btn-sm btn-info rounded-pill" %>
    </div>
  </div>
</div>
<% unless current_user.driver? %>
  <!-- Notificaciones -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card shadow-sm border-0 h-100 rounded-3">
      <div class="card-body text-center py-4">
        <div class="rounded-circle bg-warning bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3" style="width:70px; height:70px;">
          <i class="bi bi-bell fs-2 text-warning"></i>
        </div>
        <h6 class="text-uppercase text-secondary small fw-semibold">Notificaciones</h6>
        <p class="display-6 fw-bold text-warning my-2"><%= @unread_notifications_count || 0 %></p>
        <%= link_to "Ver todas", notifications_path, class: "btn btn-sm btn-warning rounded-pill" %>
      </div>
    </div>
  </div>
  <!-- Entregas vencidas -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card shadow-sm border-0 h-100 rounded-3">
      <div class="card-body text-center py-4">
        <div class="rounded-circle bg-danger bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3" style="width:70px; height:70px;">
          <i class="bi bi-exclamation-triangle fs-2 text-danger"></i>
        </div>
        <h6 class="text-uppercase text-secondary small fw-semibold">Entregas vencidas</h6>
        <p class="display-6 fw-bold text-danger my-2"><%= @overdue_deliveries_count || 0 %></p>
        <%= link_to "Ver vencidas",
              deliveries_path(
                q: {
                  delivery_date_lt: Date.current.to_s,
                  status_not_eq_all: [
                    Delivery.statuses[:delivered],
                    Delivery.statuses[:rescheduled],
                    Delivery.statuses[:cancelled],
                    Delivery.statuses[:archived],
                    Delivery.statuses[:failed]
                  ],
                  order_seller_seller_code_eq: (current_user.seller.seller_code if current_user.seller?)
                }.compact,
                no_plan: "1"
              ),
              class: "btn btn-sm btn-danger rounded-pill" %>
      </div>
    </div>
  </div>
<% end %>