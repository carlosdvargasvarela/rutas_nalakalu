<!-- app/views/dashboard/_summary_cards.html.erb -->
<% unless current_user.driver? %>
  <!-- Entregas pendientes -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card kpi-card h-100">
      <div class="card-body text-center py-4">
        <div class="rounded-circle bg-dark bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3 shadow-sm" style="width:80px; height:80px;">
          <i class="bi bi-truck fs-1 text-dark"></i>
        </div>
        <h6 class="text-uppercase text-secondary small fw-bold mb-2">Entregas pendientes</h6>
        <p class="display-5 fw-bold text-dark my-3"><%= @pending_deliveries_count || 0 %></p>
        <%= link_to deliveries_path, class: "btn btn-dark btn-sm rounded-3 shadow-sm dashboard-action-btn" do %>
          Ver entregas <i class="bi bi-arrow-right ms-1"></i>
        <% end %>
      </div>
    </div>
  </div>
  <!-- Pedidos activos -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card kpi-card h-100">
      <div class="card-body text-center py-4">
        <div class="rounded-circle bg-dark bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3 shadow-sm" style="width:80px; height:80px;">
          <i class="bi bi-box-seam fs-1 text-dark"></i>
        </div>
        <h6 class="text-uppercase text-secondary small fw-bold mb-2">Pedidos activos</h6>
        <p class="display-5 fw-bold text-dark my-3"><%= @active_orders_count || 0 %></p>
        <%= link_to orders_path, class: "btn btn-dark btn-sm rounded-3 shadow-sm dashboard-action-btn" do %>
          Ver pedidos <i class="bi bi-arrow-right ms-1"></i>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
<!-- Próximos planes (para todos) -->
<div class="col-12 col-sm-6 col-lg-3">
  <div class="card kpi-card h-100">
    <div class="card-body text-center py-4">
      <div class="rounded-circle bg-dark bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3 shadow-sm" style="width:80px; height:80px;">
        <i class="bi bi-calendar-check fs-1 text-dark"></i>
      </div>
      <h6 class="text-uppercase text-secondary small fw-bold mb-2">Próximos planes</h6>
      <p class="display-5 fw-bold text-dark my-3"><%= @upcoming_plans_count || 0 %></p>
      <%= link_to delivery_plans_path, class: "btn btn-dark btn-sm rounded-3 shadow-sm dashboard-action-btn" do %>
        Ver planes <i class="bi bi-arrow-right ms-1"></i>
      <% end %>
    </div>
  </div>
</div>
<% unless current_user.driver? %>
  <!-- Notificaciones -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card kpi-card h-100">
      <div class="card-body text-center py-4">
        <div class="rounded-circle bg-dark bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3 shadow-sm" style="width:80px; height:80px;">
          <i class="bi bi-bell fs-1 text-dark"></i>
        </div>
        <h6 class="text-uppercase text-secondary small fw-bold mb-2">Notificaciones</h6>
        <p class="display-5 fw-bold text-dark my-3"><%= @unread_notifications_count || 0 %></p>
        <%= link_to notifications_path, class: "btn btn-dark btn-sm rounded-3 shadow-sm dashboard-action-btn" do %>
          Ver todas <i class="bi bi-arrow-right ms-1"></i>
        <% end %>
      </div>
    </div>
  </div>
  <!-- Entregas vencidas -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card kpi-card h-100">
      <div class="card-body text-center py-4">
        <div class="rounded-circle bg-danger bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3 shadow-sm" style="width:80px; height:80px;">
          <i class="bi bi-exclamation-triangle fs-1 text-danger"></i>
        </div>
        <h6 class="text-uppercase text-secondary small fw-bold mb-2">Entregas vencidas</h6>
        <p class="display-5 fw-bold text-danger my-3"><%= @overdue_deliveries_count || 0 %></p>
        <%= link_to deliveries_path(
              q: {
                delivery_date_lt: Date.current.to_s,
                status_not_in: %w[delivered rescheduled cancelled archived failed],
                order_seller_seller_code_eq: (current_user.seller.seller_code if current_user.seller?)
              }.compact,
              no_plan: "1"
              ),
              class: "btn btn-danger btn-sm rounded-3 shadow-sm dashboard-action-btn" do %>
          Ver vencidas <i class="bi bi-arrow-right ms-1"></i>
        <% end %>
      </div>
    </div>
  </div>
<% end %>