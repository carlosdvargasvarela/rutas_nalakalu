<div class="card reschedule-notifications-card border-0 rounded-3 h-100">
  <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
    <h6 class="mb-0">
      <i class="bi bi-calendar-exclamation me-2"></i>
      Reprogramaciones recientes
    </h6>
    <span class="badge bg-light text-dark">
      <%= @reschedule_notifications.total_count %> en total
    </span>
  </div>
  <div class="list-group list-group-flush">
    <% if reschedule_notifications.present? %>
      <% reschedule_notifications.each do |notification| %>
        <div class="list-group-item d-flex align-items-start <%= 'bg-light' unless notification.read %>">
          <i class="bi bi-exclamation-circle text-warning fs-5 me-3"></i>
          <div class="flex-grow-1">
            <p class="mb-1">
              <%= link_to truncate(strip_tags(notification.message), length: 200),
                          notification.target_path,
                          class: "text-decoration-none fw-semibold" %>
            </p>
            <small class="text-muted">
              <i class="bi bi-clock me-1"></i>
              <%= time_ago_in_words(notification.created_at) %> atrás
              <% unless notification.read %>
                <span class="badge bg-primary ms-2">Nueva</span>
              <% end %>
            </small>
          </div>
          <div>
            <% unless notification.read %>
              <%= button_to mark_as_read_notification_path(notification),
                            method: :patch,
                            class: "btn btn-sm btn-outline-success ms-2",
                            title: "Marcar como leída" do %>
                <i class="bi bi-check2"></i>
              <% end %>
            <% else %>
              <i class="bi bi-check-circle-fill text-success"></i>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="p-4 text-center text-muted">
        <i class="bi bi-inbox fs-3 mb-2"></i>
        No hay notificaciones de reprogramación
      </div>
    <% end %>
  </div>
  <% if reschedule_notifications.present? %>
    <div class="card-footer d-flex justify-content-center">
      <%= paginate reschedule_notifications, param_name: "page_reschedules" %>
    </div>
  <% end %>
</div>