<!-- app/views/dashboard/index.html.erb -->
<div class="container-fluid py-4">
  <!-- Bienvenida -->
  <div class="row mb-4">
    <div class="col-12 col-md-8">
      <h3 class="fw-bold mb-2">
        <i class="bi bi-truck me-2 text-primary"></i>
        ¡Bienvenido, <%= current_user.name %>!
      </h3>
      <p class="text-muted mb-0">
        Rol: <span class="badge bg-primary"><%= current_user.display_role %></span>
      </p>
      <%# Mensaje motivacional o de la empresa %>
      <p class="text-secondary mt-2">"Transformando espacios, entregando calidad."</p>
    </div>
    <div class="col-12 col-md-4 d-flex align-items-center justify-content-md-end mt-3 mt-md-0">
      <div class="btn-group" role="group">
        <% if current_user.seller? || current_user.admin? %>
          <%= link_to "Nuevo Pedido", orders_path, class: "btn btn-outline-primary btn-sm" %>
        <% end %>
        <% if current_user.logistics? || current_user.admin? %>
          <%= link_to "Nueva Entrega", new_delivery_path, class: "btn btn-outline-success btn-sm" %>
        <% end %>
        <% if current_user.admin? || current_user.production_manager? %>
          <%= link_to "Importar Excel", new_delivery_import_path, class: "btn btn-outline-secondary btn-sm" %>
        <% end %>
        <%= link_to "Ver Notificaciones", notifications_path, class: "btn btn-outline-info btn-sm" %>
      </div>
    </div>
  </div>
  <!-- Cards resumen -->
  <div class="row g-4">
    <%= render "dashboard/summary_cards" %>
  </div>
  <!-- Panel de notificaciones recientes -->
  <div class="row mt-4">
    <div class="col-12 col-lg-6">
      <%= render "dashboard/recent_notifications", notifications: @recent_notifications %>
    </div>
    <div class="col-12 col-lg-6">
      <%= render "dashboard/pending_tasks", tasks: @pending_tasks %>
    </div>
  </div>
  <!-- (Opcional) Gráfico de avance semanal -->
  <div class="row mt-4">
    <div class="col-12">
      <%= render "dashboard/progress_chart", chart_data: @chart_data if @chart_data.present? %>
    </div>
  </div>
  <!-- Sección de ayuda/contacto -->
  <div class="row mt-4">
    <div class="col-12">
      <div class="alert alert-info d-flex align-items-center" role="alert">
        <i class="bi bi-question-circle-fill me-2"></i>
        ¿Necesitas ayuda? <a href="mailto:cvargas@nalakalu.com" class="ms-2">Contacta al equipo de soporte</a>
      </div>
    </div>
  </div>
</div>