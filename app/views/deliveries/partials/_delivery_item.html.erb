<!-- app/views/deliveries/_delivery_item.html.erb -->
<div class="delivery-item-row border rounded p-3 mb-3" style="background-color: #f8f9fa;">
  <%= di.input :id, as: :hidden %>
  <div class="row">
    <div class="col-md-4">
      <%= di.simple_fields_for :order_item do |oi| %>
        <%= oi.input :id, as: :hidden %>
        <%= oi.input :product,
                label: "Producto",
                required: true,
                input_html: { class: "form-control" } %>
      <% end %>
    </div>
    <div class="col-md-2">
      <%= di.input :quantity_delivered,
              label: "Cantidad",
              required: true,
              input_html: { class: "form-control", min: 0 } %>
    </div>
    <div class="col-md-2">
      <%= di.input :status,
              label: "Estado",
              collection: [
                ['Pendiente', 'pending'],
                ['Confirmado', 'confirmed'],
                ['Entregado', 'delivered']
              ],
              input_html: { class: "form-select" } %>
    </div>
    <div class="col-md-2">
      <%= di.input :service_case,
              label: "Caso de servicio",
              as: :boolean,
              wrapper_html: { class: "mt-4" } %>
    </div>
    <div class="col-md-2">
      <div class="mt-4">
        <button type="button" class="btn btn-sm btn-outline-danger" 
                data-action="click->delivery-form#removeDeliveryItem">
          <i class="bi bi-trash"></i> Eliminar
        </button>
        <%= di.input :_destroy, as: :hidden, input_html: { class: "destroy-flag" } %>
      </div>
    </div>
  </div>
  <div class="row mt-2">
    <div class="col-12">
      <%= di.simple_fields_for :order_item do |oi| %>
        <%= oi.input :notes,
                label: "Notas del producto",
                as: :text,
                input_html: { class: "form-control", rows: 2 } %>
      <% end %>
    </div>
  </div>
</div>