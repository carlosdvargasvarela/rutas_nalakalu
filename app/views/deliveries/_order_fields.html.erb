<%# app/views/deliveries/_order_fields.html.erb %>
<% delivery = f.object %>
<div class="row mb-4">
  <div class="col-12">
    <h5 class="text-secondary mb-3">
      <i class="bi bi-receipt me-2"></i>Pedido
    </h5>
  </div>
  <div class="col-md-8">
    <div class="mb-3">
      <%= label_tag :order_id, "Pedido existente", class: "form-label" %>
      <%= select_tag :order_id,
        options_for_select([]),
        prompt: "Selecciona un pedido",
        class: "form-select",
        data: { "delivery-form-target": "orderSelect" } %>
    </div>
  </div>
  <div class="col-md-4">
    <%= link_to "Crear nuevo pedido", "#",
        class: "btn btn-outline-primary btn-sm mt-4",
        data: { action: "click->delivery-form#toggleNewOrderFields" } %>
  </div>
</div>
<div data-delivery-form-target="newOrderFields" class="row mb-4">
  <div class="col-12">
    <div class="alert alert-info">
      <i class="bi bi-info-circle me-2"></i>
      Datos del nuevo pedido
    </div>
  </div>
  <div class="col-md-6">
    <div class="mb-3">
      <%= label_tag "order[number]", "NÃºmero de pedido", class: "form-label" %>
      <%= text_field_tag "order[number]",
        params.dig(:order, :number),
        placeholder: "Ej: PED-2024-001", 
        class: "form-control" %>
    </div>
  </div>
  <div class="col-md-6">
    <div class="mb-3">
      <%= label_tag :seller_id, "Vendedor", class: "form-label" %>
      <%= select_tag :seller_id,
        options_from_collection_for_select(
          Seller.includes(:user).all,
          :id,
          ->(seller) { "#{seller.name} (#{seller.seller_code})" },
          current_user.seller&.id
        ),
        prompt: "Selecciona un vendedor",
        class: "form-select" %>
    </div>
  </div>
</div>