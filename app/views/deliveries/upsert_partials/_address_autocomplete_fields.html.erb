<!-- Campo de búsqueda -->
<div class="mb-3">
  <%= label_tag "delivery_address[address]", "Buscar dirección", class: "form-label fw-bold" %>
  <%= text_field_tag "delivery_address[address]", nil,
      placeholder: "Ej: Walmart Escazú, GCode 7JXW+5FH...",
      class: "form-control form-control-lg",
      data: { 
        "address-autocomplete-target": "input",
        "delivery-form-target": "newAddressInput",
        action: "input->delivery-form#validateAddress"
      } %>
  <div class="form-text">
    <i class="bi bi-info-circle me-1"></i>
    Busca una dirección en Google Maps o escribe una dirección informal
  </div>
</div>
<!-- Info dirección seleccionada -->
<div data-address-autocomplete-target="selectedAddressInfo" 
     class="alert alert-info mb-3" 
     style="display:none;">
  <div class="d-flex align-items-center">
    <i class="bi bi-info-circle me-2"></i>
    <div>
      <strong>Dirección seleccionada:</strong><br>
      <span data-address-autocomplete-target="selectedAddressText"></span>
    </div>
  </div>
</div>
<!-- Mapa pequeño para preview -->
<div data-address-autocomplete-target="map"
     style="height: 250px;"
     class="mb-3 border rounded"></div>
<!-- Hidden fields -->
<%= hidden_field_tag "delivery_address[client_id]", (client&.id || delivery.order&.client&.id), 
    data: { "delivery-form-target": "newAddressClientId" } %>
<%= hidden_field_tag "delivery_address[latitude]", nil,
    data: { 
      "address-autocomplete-target": "lat",
      "delivery-form-target": "newAddressLat"
    } %>
<%= hidden_field_tag "delivery_address[longitude]", nil,
    data: { 
      "address-autocomplete-target": "lng",
      "delivery-form-target": "newAddressLng"
    } %>
<%= hidden_field_tag "delivery_address[plus_code]", nil,
    data: { 
      "address-autocomplete-target": "plus",
      "delivery-form-target": "newAddressPlusCode"
    } %>
<!-- Referencia adicional -->
<div class="mb-3">
  <%= label_tag "delivery_address[description]", "Referencia adicional", class: "form-label" %>
  <%= text_field_tag "delivery_address[description]", nil,
      placeholder: "Ej: Casa blanca, portón negro",
      class: "form-control",
      data: { "delivery-form-target": "newAddressDescription" } %>
</div>