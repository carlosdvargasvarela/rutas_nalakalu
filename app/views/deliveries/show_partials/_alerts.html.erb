<% if policy(delivery).approve? && delivery.needs_approval? && !delivery.approved? %>
  <div class="alert alert-warning d-flex justify-content-between align-items-center shadow-sm">
    <span>
      <i class="bi bi-exclamation-triangle me-2"></i>
      Esta entrega requiere aprobación de producción.
    </span>
    <%= button_to approve_delivery_path(delivery),
        method: :patch,
        class: "btn btn-sm btn-success",
        data: { turbo_confirm: "¿Marcar esta entrega como aprobada para la semana actual?" } do %>
      <i class="bi bi-check-circle"></i> Aprobar Entrega
    <% end %>
  </div>
<% end %>
<% if delivery.needs_approval? && !delivery.approved? %>
  <div class="alert alert-info shadow-sm">
    <i class="bi bi-info-circle me-2"></i>
    <strong>Entrega bloqueada:</strong> No se pueden realizar acciones hasta que sea aprobada.
  </div>
<% end %>