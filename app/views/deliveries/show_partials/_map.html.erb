<div class="col-12 mb-4">
  <div class="card shadow-sm">
    <div class="card-header bg-light">
      <i class="bi bi-map me-1"></i> Ubicación en el mapa
    </div>
    <div class="card-body">
      <% if delivery.delivery_address.latitude.present? && delivery.delivery_address.longitude.present? %>
        <div id="delivery-map"
             data-controller="delivery-map"
             data-delivery-map-api-key-value="<%= Rails.application.credentials.dig(:google_maps, :api_key) %>"
             data-delivery-map-points-value="<%= [{
               lat: delivery.delivery_address.latitude,
               lng: delivery.delivery_address.longitude,
               client: delivery.order&.client&.name,
               address: delivery.delivery_address.address,
               order_number: delivery.order&.number
             }].to_json %>"
             style="height: 300px; border:1px solid #ddd; border-radius: 8px;">
        </div>
      <% else %>
        <div class="alert alert-info">
          <i class="bi bi-info-circle me-2"></i>
          Esta dirección aún no tiene coordenadas registradas.
        </div>
      <% end %>
    </div>
  </div>
</div>