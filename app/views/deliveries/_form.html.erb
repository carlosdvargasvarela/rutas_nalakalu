<%# app/views/deliveries/_form.html.erb %>
<%= simple_form_for delivery, html: {
      data: {
        controller: "delivery-form",
        "delivery-form-addresses-url-value": addresses_for_client_deliveries_path,
        "delivery-form-orders-url-value": orders_for_client_deliveries_path
      }
    } do |f| %>
  <%= render "client_fields", f: f, clients: clients %>
  <%= render "address_fields", f: f, addresses: addresses, delivery: delivery %>
  <%= render "order_fields", f: f %>
  <%= render "order_items_fields", f: f %>
  <%# Datos de la entrega %>
  <div class="row mb-4">
    <div class="col-12">
      <h5 class="text-secondary mb-3">
        <i class="bi bi-calendar-event me-2"></i>Datos de la entrega
      </h5>
    </div>
    <% if !current_user.seller? || delivery.new_record? %>
      <div class="col-md-6">
        <%= f.date_field :delivery_date, as: :date, label: "Fecha de entrega",
        input_html: { class: "form-control" },
        label_html: { class: "form-label" } %>
      </div>
    <% end %>
  </div>
  <div class="row mb-4">
    <div class="col-md-6">
      <%= f.input :contact_name, label: "Nombre de contacto", 
          input_html: { class: "form-control" }, 
          label_html: { class: "form-label" } %>
    </div>
    <div class="col-md-6">
      <%= f.input :contact_phone, label: "Teléfono de contacto", 
          input_html: { class: "form-control" }, 
          label_html: { class: "form-label" } %>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-12">
      <%= f.input :delivery_notes, as: :text, label: "Notas de entrega", 
          input_html: { class: "form-control", rows: 3 }, 
          label_html: { class: "form-label" } %>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-md-6">
      <%= f.input :delivery_time_preference, 
        label: "Preferencia de horario", 
        input_html: { class: "form-control", placeholder: "Ej: Mañana, Por la tarde, 2:00 pm" }, 
        label_html: { class: "form-label" } %>
    </div>
  </div>
  <div class="d-flex justify-content-end gap-2">
    <%= link_to "Cancelar", deliveries_path, class: "btn btn-secondary" %>
    <%= f.button :submit, "Guardar entrega", class: "btn btn-primary" %>
  </div>
<% end %>