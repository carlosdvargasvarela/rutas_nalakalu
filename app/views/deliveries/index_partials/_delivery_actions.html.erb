<div class="dropup">
  <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" 
          data-bs-toggle="dropdown" aria-expanded="false">
    Acciones
  </button>
  <ul class="dropdown-menu">
    <li>
      <%= button_to confirm_all_items_delivery_path(delivery),
            method: :patch,
            data: { turbo_confirm: "⚠️ ¿Confirmar TODOS los items?" },
            class: "dropdown-item text-success border-0 bg-transparent text-start w-100" do %>
        <i class="bi bi-check2-all"></i> Confirmar todo
      <% end %>
    </li>
    <li>
      <a href="#" class="dropdown-item text-warning" 
         data-bs-toggle="modal" 
         data-bs-target="#rescheduleModal-<%= delivery.id %>">
        <i class="bi bi-calendar-plus"></i> Reagendar
      </a>
    </li>
    <% if current_user.admin? || current_user.production_manager? %>
      <li>
        <%= button_to archive_delivery_path(delivery),
          method: :patch,
          data: { turbo_confirm: "¿Archivar esta entrega?" },
          class: "dropdown-item text-muted border-0 bg-transparent text-start w-100" do %>
          <i class="bi bi-archive"></i> Archivar
        <% end %>
      </li>
    <% end %>
  </ul>
</div>
<%= render "deliveries/shared_partials/reschedule_modal", delivery: delivery %>