<%# app/views/production/delivery_plans/_load_summary.html.erb %>
<div class="card shadow-sm border-0">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="card-title mb-0"><i class="bi bi-bar-chart-line me-2"></i>Resumen de Carga</h5>
      <div class="d-flex gap-2">
        <% if policy(delivery_plan).mark_all_loaded? %>
          <%= button_to mark_all_loaded_production_delivery_plan_path(delivery_plan), 
              method: :post, 
              class: "btn btn-success btn-sm", 
              data: { turbo_confirm: "¿Estás seguro de marcar TODOS los productos del plan como cargados?" } do %>
            <i class="bi bi-check-all me-1"></i> Marcar Todo Cargado
          <% end %>
        <% end %>
        <button class="btn btn-outline-info btn-sm" data-bs-toggle="modal" data-bs-target="#filterModal">
          <i class="bi bi-funnel me-1"></i> Filtrar
        </button>
      </div>
    </div>
    <div class="row text-center g-3">
      <div class="col-6 col-md-3">
        <div class="border rounded py-3">
          <i class="bi bi-box-seam fs-4 text-primary"></i>
          <h4 class="mb-0 mt-2"><%= load_stats[:total_items] %></h4>
          <small class="text-muted">Total Productos</small>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="border rounded py-3 bg-success bg-opacity-10">
          <i class="bi bi-check-circle fs-4 text-success"></i>
          <h4 class="mb-0 mt-2 text-success"><%= load_stats[:loaded_items] %></h4>
          <small class="text-muted">Cargados</small>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="border rounded py-3 bg-warning bg-opacity-10">
          <i class="bi bi-hourglass-split fs-4 text-warning"></i>
          <h4 class="mb-0 mt-2 text-warning"><%= load_stats[:unloaded_items] %></h4>
          <small class="text-muted">Sin Cargar</small>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="border rounded py-3 bg-danger bg-opacity-10">
          <i class="bi bi-exclamation-triangle fs-4 text-danger"></i>
          <h4 class="mb-0 mt-2 text-danger"><%= load_stats[:missing_items] %></h4>
          <small class="text-muted">Faltantes</small>
        </div>
      </div>
    </div>
  </div>
</div>